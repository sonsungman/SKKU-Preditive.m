<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Son's Predictive modelling: WEEK_7 Report</title>

<meta property="description" itemprop="description" content="Middle HW"/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-04-09"/>
<meta property="article:created" itemprop="dateCreated" content="2021-04-09"/>
<meta name="article:author" content="sonsungman"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Son&#39;s Predictive modelling: WEEK_7 Report"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Middle HW"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Son&#39;s Predictive modelling"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Son&#39;s Predictive modelling: WEEK_7 Report"/>
<meta property="twitter:description" content="Middle HW"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["WEEK_7 Report"]},{"type":"character","attributes":{},"value":["Middle HW"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["sonsungman"]},{"type":"character","attributes":{},"value":["https://sonsungman.github.io/SKKU-Preditive.m/"]}]}]},{"type":"character","attributes":{},"value":["04-09-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","code_folding","draft"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["2021-04-09-week7report_files/anchor-4.2.2/anchor.min.js","2021-04-09-week7report_files/bowser-1.9.3/bowser.min.js","2021-04-09-week7report_files/distill-2.2.21/template.v2.js","2021-04-09-week7report_files/figure-html5/unnamed-chunk-1-1.png","2021-04-09-week7report_files/figure-html5/unnamed-chunk-14-1.png","2021-04-09-week7report_files/figure-html5/unnamed-chunk-15-1.png","2021-04-09-week7report_files/figure-html5/unnamed-chunk-16-1.png","2021-04-09-week7report_files/jquery-1.11.3/jquery.min.js","2021-04-09-week7report_files/popper-2.6.0/popper.min.js","2021-04-09-week7report_files/tippy-6.2.7/tippy-bundle.umd.min.js","2021-04-09-week7report_files/tippy-6.2.7/tippy-light-border.css","2021-04-09-week7report_files/tippy-6.2.7/tippy.css","2021-04-09-week7report_files/tippy-6.2.7/tippy.umd.min.js","2021-04-09-week7report_files/webcomponents-2.0.0/webcomponents.js","train.csv"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"WEEK_7 Report","description":"Middle HW","authors":[{"author":"sonsungman","authorURL":"https://sonsungman.github.io/SKKU-Preditive.m/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-04-09T00:00:00.000+09:00","citationText":"sonsungman, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Son's Predictive modelling</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Applied Statistics</a>
<a href="../../index3.html">BDA Project</a>
<a href="../../index2.html">Article</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>WEEK_7 Report</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Middle HW</p></p>
</div>

<div class="d-byline">
  sonsungman <a href="https://sonsungman.github.io/SKKU-Preditive.m/" class="uri">https://sonsungman.github.io/SKKU-Preditive.m/</a> 
  
<br/>04-09-2021
</div>

<div class="d-article">
<h2 id="ridge-regression-solution">1. Ridge regression solution</h2>
<h3 id="section">1)</h3>
<p>Let <span class="math inline">\(X = U \Sigma V^{T}\)</span>. Under the conditions given in the problem, <span class="math inline">\(V^{T}V = I\)</span> and <span class="math inline">\(U^{T}U =I\)</span>.</p>
<p><span class="math display">\[
\begin{aligned}
 (X^{T}X + \lambda I)^{-1} X^{T}  
    &amp;=  [(U \Sigma V^{T})^{T} U \Sigma V^{T} + \lambda I]^{-1}(U \Sigma V^{T})^{T} \\
    &amp;=  [V\Sigma U^{T} U\Sigma V^{T} + \lambda I]^{-1}V\Sigma^{T}U^{T} \\
    &amp;= [V\Sigma^{T}\Sigma V^{T} + \lambda I]^{-1}V\Sigma U^{T} \\
    &amp;=[V \Sigma^{2} V^{T} + \lambda VV^{T} ]^{-1}V\Sigma U^{T} \\
    &amp;=[V(\Sigma ^{2} + \lambda I)V^{T}]^{-1}V\Sigma U^{T} \\
    &amp;=(V^{T})^{-1}(\Sigma ^{2} + \lambda I)^{-1}\Sigma U^{T} 
\end{aligned}
\]</span></p>
<p><span class="math inline">\((\Sigma ^{2} + \lambda I)^{-1}\Sigma\)</span> is a diagonal matrix with elements <span class="math inline">\(\frac{\sigma_{i}}{\sigma^{2}_{i}+\lambda}\)</span> <span class="math inline">\(i = 1, ... ,d\)</span></p>
<p>Let’s call this matrix as <span class="math inline">\(\Sigma^{*}\)</span></p>
<p>Then,</p>
<p><span class="math display">\[
  \begin{aligned}
  (X^{T}X + \lambda I)^{-1} X^{T} 
   &amp;= V \Sigma^{*} U^{T}
  \end{aligned}
\]</span></p>
<h3 id="section-1">2)</h3>
<p><span class="math display">\[
  \begin{aligned}
    \hat{\beta}_{Ridge} &amp;= (X^{T}X + \lambda I)^{-1} X^{T}y \\
    &amp;= V \Sigma^{*} U^{T}y
  \end{aligned}
\]</span></p>
<p><span class="math display">\[
  \begin{aligned}
  0 \le\|\hat{\beta}_{Ridge}\|_{2} &amp;= \|V \Sigma^{*} U^{T}y\|_{2} \\
  &amp;= \|V \Sigma^{*} U^{T}\|_{F}\|y\|_{2} \\
  &amp;= \sqrt{tr(\Sigma^{*})}\|y\|_{2} \\
  &amp;= \sqrt{\sum_{i = 1}^{d} (\frac{\sigma_{i}}{\sigma^{2}_{i}+\lambda})^{2}}\|y\|_{2}
  \end{aligned}
\]</span></p>
<p><span class="math inline">\(\|\centerdot\|_{F}\)</span> means Frobenious norm</p>
<p><span class="math display">\[
  0\le\|\hat{\beta}_{Ridge}\|_{2}\le\min(\sqrt{\sum_{i = 1}^{d} (\frac{\sigma_{i}}{\sigma^{2}_{i}+\lambda})^{2}}\|y\|_{2},\|\hat{\beta}_{OLS}\|_{2})
\]</span></p>
<p>As the <span class="math inline">\(\lambda\)</span> grows, the upper bound of <span class="math inline">\(\|\hat{\beta}_{Ridge}\|_{2}\)</span> becomes smaller, so the value of <span class="math inline">\(\|\hat{\beta}_{Ridge}\|_{2}\)</span> becomes smaller.</p>
<h2 id="kaggle-competition-data">2. Kaggle competition data</h2>
<h3 id="calculates-the-all-the-coefficients">1) calculates the all the coefficients</h3>
<h4 id="data-load">Data load</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span>file <span class='op'>=</span> <span class='st'>"C:/Users/Actuary/Desktop/R with Stan/SKKU-Preditive.m2/_posts/2021-04-09-week7report/train.csv"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>housing_recipe</span> <span class='op'>&lt;-</span> <span class='va'>train</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>recipe</span><span class='op'>(</span><span class='va'>sale_price</span> <span class='op'>~</span> <span class='va'>.</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>step_rm</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>step_log</span><span class='op'>(</span><span class='va'>sale_price</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>step_modeimpute</span><span class='op'>(</span><span class='fu'>all_nominal</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>step_dummy</span><span class='op'>(</span><span class='fu'>all_nominal</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>step_meanimpute</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>step_normalize</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>prep</span><span class='op'>(</span>training <span class='op'>=</span> <span class='va'>train</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train2</span> <span class='op'>&lt;-</span> <span class='fu'>juice</span><span class='op'>(</span><span class='va'>housing_recipe</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>Cross-validation for hyperparameter tuning</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>2021</span><span class='op'>)</span>

<span class='va'>validation_split</span> <span class='op'>&lt;-</span> <span class='fu'>vfold_cv</span><span class='op'>(</span><span class='va'>train2</span>, v <span class='op'>=</span> <span class='fl'>10</span>, strata <span class='op'>=</span> <span class='va'>sale_price</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tune_spec_Ridge</span> <span class='op'>&lt;-</span> <span class='fu'>linear_reg</span><span class='op'>(</span>penalty <span class='op'>=</span> <span class='fu'>tune</span><span class='op'>(</span><span class='op'>)</span>, mixture <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  
  <span class='fu'>set_engine</span><span class='op'>(</span><span class='st'>"glmnet"</span><span class='op'>)</span>

<span class='va'>Ridge_grid</span> <span class='op'>&lt;-</span> <span class='fu'>grid_regular</span><span class='op'>(</span><span class='fu'>penalty</span><span class='op'>(</span><span class='op'>)</span>, levels <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tune_spec_Lasso</span> <span class='op'>&lt;-</span> <span class='fu'>linear_reg</span><span class='op'>(</span>penalty <span class='op'>=</span> <span class='fu'>tune</span><span class='op'>(</span><span class='op'>)</span>, mixture <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  
  <span class='fu'>set_engine</span><span class='op'>(</span><span class='st'>"glmnet"</span><span class='op'>)</span>

<span class='va'>Lasso_grid</span> <span class='op'>&lt;-</span> <span class='fu'>grid_regular</span><span class='op'>(</span><span class='fu'>penalty</span><span class='op'>(</span><span class='op'>)</span>, levels <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>workflow_Ridge</span> <span class='op'>&lt;-</span> <span class='fu'>workflow</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>add_model</span><span class='op'>(</span><span class='va'>tune_spec_Ridge</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_formula</span><span class='op'>(</span><span class='va'>sale_price</span> <span class='op'>~</span> <span class='va'>.</span><span class='op'>)</span>

<span class='va'>workflow_Lasso</span> <span class='op'>&lt;-</span> <span class='fu'>workflow</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>add_model</span><span class='op'>(</span><span class='va'>tune_spec_Lasso</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_formula</span><span class='op'>(</span><span class='va'>sale_price</span> <span class='op'>~</span> <span class='va'>.</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://github.com/collectivemedia/tictoc'>tictoc</a></span><span class='op'>)</span>
<span class='fu'>doParallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/doParallel/man/registerDoParallel.html'>registerDoParallel</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/pkg/tictoc/man/tic.html'>tic</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>tune_result_Ridge</span> <span class='op'>&lt;-</span> <span class='va'>workflow_Ridge</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tune_grid</span><span class='op'>(</span><span class='va'>validation_split</span>,
            grid <span class='op'>=</span> <span class='va'>Ridge_grid</span>,
            metrics <span class='op'>=</span> <span class='fu'>metric_set</span><span class='op'>(</span><span class='va'>rmse</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/tictoc/man/tic.html'>toc</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>15.41 sec elapsed</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://github.com/collectivemedia/tictoc'>tictoc</a></span><span class='op'>)</span>
<span class='fu'>doParallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/doParallel/man/registerDoParallel.html'>registerDoParallel</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/pkg/tictoc/man/tic.html'>tic</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>tune_result_Lasso</span> <span class='op'>&lt;-</span> <span class='va'>workflow_Lasso</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tune_grid</span><span class='op'>(</span><span class='va'>validation_split</span>,
            grid <span class='op'>=</span> <span class='va'>Lasso_grid</span>,
            metrics <span class='op'>=</span> <span class='fu'>metric_set</span><span class='op'>(</span><span class='va'>rmse</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/tictoc/man/tic.html'>toc</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>14.55 sec elapsed</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>result_R</span><span class='op'>&lt;-</span><span class='va'>tune_result_Ridge</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>collect_metrics</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>result_L</span><span class='op'>&lt;-</span> <span class='va'>tune_result_Lasso</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>collect_metrics</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  <span class='va'>final_Ridge</span> <span class='op'>&lt;-</span> 
  <span class='va'>workflow_Ridge</span> <span class='op'>%&gt;%</span>
  <span class='fu'>finalize_workflow</span><span class='op'>(</span><span class='fu'>select_best</span><span class='op'>(</span><span class='va'>tune_result_Ridge</span>, <span class='st'>'rmse'</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>fit</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>train2</span><span class='op'>)</span>

  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>final_Ridge</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>$pre
$actions
$actions$formula
$formula
sale_price ~ .
&lt;environment: 0x0000000028374ac8&gt;

$blueprint
Formula blueprint: 
 
# Predictors: 0 
  # Outcomes: 0 
   Intercept: TRUE 
Novel Levels: FALSE 
 Composition: tibble 
  Indicators: traditional 

attr(,&quot;class&quot;)
[1] &quot;action_formula&quot; &quot;action_pre&quot;     &quot;action&quot;        


$mold
$mold$predictors
# A tibble: 1,460 x 246
   `(Intercept)` ms_sub_class lot_frontage lot_area overall_qual
           &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;
 1             1       0.0733     -0.229    -0.207        0.651 
 2             1      -0.872       0.452    -0.0919      -0.0718
 3             1       0.0733     -0.0927    0.0735       0.651 
 4             1       0.310      -0.456    -0.0969       0.651 
 5             1       0.0733      0.634     0.375        1.37  
 6             1      -0.163       0.679     0.360       -0.795 
 7             1      -0.872       0.225    -0.0434       1.37  
 8             1       0.0733     -0.00187  -0.0135       0.651 
 9             1      -0.163      -0.865    -0.441        0.651 
10             1       3.15       -0.910    -0.310       -0.795 
# ... with 1,450 more rows, and 241 more variables:
#   overall_cond &lt;dbl&gt;, year_built &lt;dbl&gt;, year_remod_add &lt;dbl&gt;,
#   mas_vnr_area &lt;dbl&gt;, bsmt_fin_sf1 &lt;dbl&gt;, bsmt_fin_sf2 &lt;dbl&gt;,
#   bsmt_unf_sf &lt;dbl&gt;, total_bsmt_sf &lt;dbl&gt;, x1st_flr_sf &lt;dbl&gt;,
#   x2nd_flr_sf &lt;dbl&gt;, low_qual_fin_sf &lt;dbl&gt;, gr_liv_area &lt;dbl&gt;,
#   bsmt_full_bath &lt;dbl&gt;, bsmt_half_bath &lt;dbl&gt;, full_bath &lt;dbl&gt;,
#   half_bath &lt;dbl&gt;, bedroom_abv_gr &lt;dbl&gt;, kitchen_abv_gr &lt;dbl&gt;,
#   tot_rms_abv_grd &lt;dbl&gt;, fireplaces &lt;dbl&gt;, garage_yr_blt &lt;dbl&gt;,
#   garage_cars &lt;dbl&gt;, garage_area &lt;dbl&gt;, wood_deck_sf &lt;dbl&gt;,
#   open_porch_sf &lt;dbl&gt;, enclosed_porch &lt;dbl&gt;, x3ssn_porch &lt;dbl&gt;,
#   screen_porch &lt;dbl&gt;, pool_area &lt;dbl&gt;, misc_val &lt;dbl&gt;,
#   mo_sold &lt;dbl&gt;, yr_sold &lt;dbl&gt;, ms_zoning_FV &lt;dbl&gt;,
#   ms_zoning_RH &lt;dbl&gt;, ms_zoning_RL &lt;dbl&gt;, ms_zoning_RM &lt;dbl&gt;,
#   street_Pave &lt;dbl&gt;, alley_Pave &lt;dbl&gt;, lot_shape_IR2 &lt;dbl&gt;,
#   lot_shape_IR3 &lt;dbl&gt;, lot_shape_Reg &lt;dbl&gt;, land_contour_HLS &lt;dbl&gt;,
#   land_contour_Low &lt;dbl&gt;, land_contour_Lvl &lt;dbl&gt;,
#   utilities_NoSeWa &lt;dbl&gt;, lot_config_CulDSac &lt;dbl&gt;,
#   lot_config_FR2 &lt;dbl&gt;, lot_config_FR3 &lt;dbl&gt;,
#   lot_config_Inside &lt;dbl&gt;, land_slope_Mod &lt;dbl&gt;,
#   land_slope_Sev &lt;dbl&gt;, neighborhood_Blueste &lt;dbl&gt;,
#   neighborhood_BrDale &lt;dbl&gt;, neighborhood_BrkSide &lt;dbl&gt;,
#   neighborhood_ClearCr &lt;dbl&gt;, neighborhood_CollgCr &lt;dbl&gt;,
#   neighborhood_Crawfor &lt;dbl&gt;, neighborhood_Edwards &lt;dbl&gt;,
#   neighborhood_Gilbert &lt;dbl&gt;, neighborhood_IDOTRR &lt;dbl&gt;,
#   neighborhood_MeadowV &lt;dbl&gt;, neighborhood_Mitchel &lt;dbl&gt;,
#   neighborhood_NAmes &lt;dbl&gt;, neighborhood_NoRidge &lt;dbl&gt;,
#   neighborhood_NPkVill &lt;dbl&gt;, neighborhood_NridgHt &lt;dbl&gt;,
#   neighborhood_NWAmes &lt;dbl&gt;, neighborhood_OldTown &lt;dbl&gt;,
#   neighborhood_Sawyer &lt;dbl&gt;, neighborhood_SawyerW &lt;dbl&gt;,
#   neighborhood_Somerst &lt;dbl&gt;, neighborhood_StoneBr &lt;dbl&gt;,
#   neighborhood_SWISU &lt;dbl&gt;, neighborhood_Timber &lt;dbl&gt;,
#   neighborhood_Veenker &lt;dbl&gt;, condition1_Feedr &lt;dbl&gt;,
#   condition1_Norm &lt;dbl&gt;, condition1_PosA &lt;dbl&gt;,
#   condition1_PosN &lt;dbl&gt;, condition1_RRAe &lt;dbl&gt;,
#   condition1_RRAn &lt;dbl&gt;, condition1_RRNe &lt;dbl&gt;,
#   condition1_RRNn &lt;dbl&gt;, condition2_Feedr &lt;dbl&gt;,
#   condition2_Norm &lt;dbl&gt;, condition2_PosA &lt;dbl&gt;,
#   condition2_PosN &lt;dbl&gt;, condition2_RRAe &lt;dbl&gt;,
#   condition2_RRAn &lt;dbl&gt;, condition2_RRNn &lt;dbl&gt;,
#   bldg_type_X2fmCon &lt;dbl&gt;, bldg_type_Duplex &lt;dbl&gt;,
#   bldg_type_Twnhs &lt;dbl&gt;, bldg_type_TwnhsE &lt;dbl&gt;,
#   house_style_X1.5Unf &lt;dbl&gt;, house_style_X1Story &lt;dbl&gt;,
#   house_style_X2.5Fin &lt;dbl&gt;, house_style_X2.5Unf &lt;dbl&gt;,
#   house_style_X2Story &lt;dbl&gt;, house_style_SFoyer &lt;dbl&gt;, ...

$mold$outcomes
# A tibble: 1,460 x 1
   sale_price
        &lt;dbl&gt;
 1       12.2
 2       12.1
 3       12.3
 4       11.8
 5       12.4
 6       11.9
 7       12.6
 8       12.2
 9       11.8
10       11.7
# ... with 1,450 more rows

$mold$blueprint
Formula blueprint: 
 
# Predictors: 245 
  # Outcomes: 1 
   Intercept: TRUE 
Novel Levels: FALSE 
 Composition: tibble 
  Indicators: traditional 

$mold$extras
$mold$extras$offset
NULL



attr(,&quot;class&quot;)
[1] &quot;stage_pre&quot; &quot;stage&quot;    

$fit
$actions
$actions$model
$spec
Linear Regression Model Specification (regression)

Main Arguments:
  penalty = 0.196304065004027
  mixture = 0

Computational engine: glmnet 


$formula
NULL

attr(,&quot;class&quot;)
[1] &quot;action_model&quot; &quot;action_fit&quot;   &quot;action&quot;      


$fit
parsnip model object

Fit time:  90ms 

Call:  glmnet::glmnet(x = maybe_matrix(x), y = y, family = &quot;gaussian&quot;,      alpha = ~0) 

     Df  %Dev Lambda
1   245  0.00 326.30
2   245  3.13 297.30
3   245  3.43 270.90
4   245  3.75 246.80
5   245  4.10 224.90
6   245  4.48 204.90
7   245  4.90 186.70
8   245  5.35 170.10
9   245  5.85 155.00
10  245  6.38 141.30
11  245  6.96 128.70
12  245  7.59 117.30
13  245  8.27 106.90
14  245  9.01  97.36
15  245  9.80  88.71
16  245 10.66  80.83
17  245 11.58  73.65
18  245 12.57  67.11
19  245 13.63  61.15
20  245 14.77  55.71
21  245 15.98  50.76
22  245 17.28  46.25
23  245 18.65  42.15
24  245 20.11  38.40
25  245 21.65  34.99
26  245 23.28  31.88
27  245 24.98  29.05
28  245 26.77  26.47
29  245 28.63  24.12
30  245 30.57  21.97
31  245 32.57  20.02
32  245 34.64  18.24
33  245 36.76  16.62
34  245 38.92  15.15
35  245 41.12  13.80
36  245 43.35  12.57
37  245 45.60  11.46
38  245 47.85  10.44
39  245 50.09   9.51
40  245 52.32   8.67
41  245 54.51   7.90
42  245 56.67   7.20
43  245 58.78   6.56
44  245 60.83   5.97
45  245 62.81   5.44
46  245 64.72   4.96
47  245 66.55   4.52
48  245 68.30   4.12
49  245 69.97   3.75
50  245 71.54   3.42
51  245 73.03   3.12
52  245 74.43   2.84
53  245 75.74   2.59
54  245 76.97   2.36
55  245 78.12   2.15
56  245 79.19   1.96
57  245 80.19   1.78
58  245 81.12   1.62
59  245 81.98   1.48
60  245 82.77   1.35
61  245 83.51   1.23
62  245 84.19   1.12
63  245 84.83   1.02
64  245 85.41   0.93
65  245 85.96   0.85
66  245 86.46   0.77
67  245 86.93   0.70
68  245 87.36   0.64
69  245 87.76   0.58
70  245 88.13   0.53
71  245 88.47   0.48
72  245 88.79   0.44
73  245 89.09   0.40
74  245 89.36   0.37
75  245 89.62   0.33
76  245 89.86   0.30
77  245 90.08   0.28
78  245 90.29   0.25
79  245 90.48   0.23
80  245 90.66   0.21
81  245 90.83   0.19
82  245 90.99   0.17
83  245 91.14   0.16
84  245 91.27   0.14
85  245 91.40   0.13
86  245 91.52   0.12
87  245 91.63   0.11
88  245 91.74   0.10
89  245 91.84   0.09
90  245 91.93   0.08
91  245 92.02   0.08
92  245 92.10   0.07
93  245 92.18   0.06
94  245 92.25   0.06
95  245 92.32   0.05
96  245 92.39   0.05
97  245 92.45   0.04
98  245 92.51   0.04
99  245 92.57   0.04
100 245 92.63   0.03

attr(,&quot;class&quot;)
[1] &quot;stage_fit&quot; &quot;stage&quot;    

$post
$actions
list()

attr(,&quot;class&quot;)
[1] &quot;stage_post&quot; &quot;stage&quot;     

$trained
[1] TRUE</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  <span class='va'>final_Lasso</span> <span class='op'>&lt;-</span> 
  <span class='va'>workflow_Lasso</span> <span class='op'>%&gt;%</span>
  <span class='fu'>finalize_workflow</span><span class='op'>(</span><span class='fu'>select_best</span><span class='op'>(</span><span class='va'>tune_result_Lasso</span>, <span class='st'>'rmse'</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>fit</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>train2</span><span class='op'>)</span>

  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>final_Lasso</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>$pre
$actions
$actions$formula
$formula
sale_price ~ .
&lt;environment: 0x00000000284019f8&gt;

$blueprint
Formula blueprint: 
 
# Predictors: 0 
  # Outcomes: 0 
   Intercept: TRUE 
Novel Levels: FALSE 
 Composition: tibble 
  Indicators: traditional 

attr(,&quot;class&quot;)
[1] &quot;action_formula&quot; &quot;action_pre&quot;     &quot;action&quot;        


$mold
$mold$predictors
# A tibble: 1,460 x 246
   `(Intercept)` ms_sub_class lot_frontage lot_area overall_qual
           &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;
 1             1       0.0733     -0.229    -0.207        0.651 
 2             1      -0.872       0.452    -0.0919      -0.0718
 3             1       0.0733     -0.0927    0.0735       0.651 
 4             1       0.310      -0.456    -0.0969       0.651 
 5             1       0.0733      0.634     0.375        1.37  
 6             1      -0.163       0.679     0.360       -0.795 
 7             1      -0.872       0.225    -0.0434       1.37  
 8             1       0.0733     -0.00187  -0.0135       0.651 
 9             1      -0.163      -0.865    -0.441        0.651 
10             1       3.15       -0.910    -0.310       -0.795 
# ... with 1,450 more rows, and 241 more variables:
#   overall_cond &lt;dbl&gt;, year_built &lt;dbl&gt;, year_remod_add &lt;dbl&gt;,
#   mas_vnr_area &lt;dbl&gt;, bsmt_fin_sf1 &lt;dbl&gt;, bsmt_fin_sf2 &lt;dbl&gt;,
#   bsmt_unf_sf &lt;dbl&gt;, total_bsmt_sf &lt;dbl&gt;, x1st_flr_sf &lt;dbl&gt;,
#   x2nd_flr_sf &lt;dbl&gt;, low_qual_fin_sf &lt;dbl&gt;, gr_liv_area &lt;dbl&gt;,
#   bsmt_full_bath &lt;dbl&gt;, bsmt_half_bath &lt;dbl&gt;, full_bath &lt;dbl&gt;,
#   half_bath &lt;dbl&gt;, bedroom_abv_gr &lt;dbl&gt;, kitchen_abv_gr &lt;dbl&gt;,
#   tot_rms_abv_grd &lt;dbl&gt;, fireplaces &lt;dbl&gt;, garage_yr_blt &lt;dbl&gt;,
#   garage_cars &lt;dbl&gt;, garage_area &lt;dbl&gt;, wood_deck_sf &lt;dbl&gt;,
#   open_porch_sf &lt;dbl&gt;, enclosed_porch &lt;dbl&gt;, x3ssn_porch &lt;dbl&gt;,
#   screen_porch &lt;dbl&gt;, pool_area &lt;dbl&gt;, misc_val &lt;dbl&gt;,
#   mo_sold &lt;dbl&gt;, yr_sold &lt;dbl&gt;, ms_zoning_FV &lt;dbl&gt;,
#   ms_zoning_RH &lt;dbl&gt;, ms_zoning_RL &lt;dbl&gt;, ms_zoning_RM &lt;dbl&gt;,
#   street_Pave &lt;dbl&gt;, alley_Pave &lt;dbl&gt;, lot_shape_IR2 &lt;dbl&gt;,
#   lot_shape_IR3 &lt;dbl&gt;, lot_shape_Reg &lt;dbl&gt;, land_contour_HLS &lt;dbl&gt;,
#   land_contour_Low &lt;dbl&gt;, land_contour_Lvl &lt;dbl&gt;,
#   utilities_NoSeWa &lt;dbl&gt;, lot_config_CulDSac &lt;dbl&gt;,
#   lot_config_FR2 &lt;dbl&gt;, lot_config_FR3 &lt;dbl&gt;,
#   lot_config_Inside &lt;dbl&gt;, land_slope_Mod &lt;dbl&gt;,
#   land_slope_Sev &lt;dbl&gt;, neighborhood_Blueste &lt;dbl&gt;,
#   neighborhood_BrDale &lt;dbl&gt;, neighborhood_BrkSide &lt;dbl&gt;,
#   neighborhood_ClearCr &lt;dbl&gt;, neighborhood_CollgCr &lt;dbl&gt;,
#   neighborhood_Crawfor &lt;dbl&gt;, neighborhood_Edwards &lt;dbl&gt;,
#   neighborhood_Gilbert &lt;dbl&gt;, neighborhood_IDOTRR &lt;dbl&gt;,
#   neighborhood_MeadowV &lt;dbl&gt;, neighborhood_Mitchel &lt;dbl&gt;,
#   neighborhood_NAmes &lt;dbl&gt;, neighborhood_NoRidge &lt;dbl&gt;,
#   neighborhood_NPkVill &lt;dbl&gt;, neighborhood_NridgHt &lt;dbl&gt;,
#   neighborhood_NWAmes &lt;dbl&gt;, neighborhood_OldTown &lt;dbl&gt;,
#   neighborhood_Sawyer &lt;dbl&gt;, neighborhood_SawyerW &lt;dbl&gt;,
#   neighborhood_Somerst &lt;dbl&gt;, neighborhood_StoneBr &lt;dbl&gt;,
#   neighborhood_SWISU &lt;dbl&gt;, neighborhood_Timber &lt;dbl&gt;,
#   neighborhood_Veenker &lt;dbl&gt;, condition1_Feedr &lt;dbl&gt;,
#   condition1_Norm &lt;dbl&gt;, condition1_PosA &lt;dbl&gt;,
#   condition1_PosN &lt;dbl&gt;, condition1_RRAe &lt;dbl&gt;,
#   condition1_RRAn &lt;dbl&gt;, condition1_RRNe &lt;dbl&gt;,
#   condition1_RRNn &lt;dbl&gt;, condition2_Feedr &lt;dbl&gt;,
#   condition2_Norm &lt;dbl&gt;, condition2_PosA &lt;dbl&gt;,
#   condition2_PosN &lt;dbl&gt;, condition2_RRAe &lt;dbl&gt;,
#   condition2_RRAn &lt;dbl&gt;, condition2_RRNn &lt;dbl&gt;,
#   bldg_type_X2fmCon &lt;dbl&gt;, bldg_type_Duplex &lt;dbl&gt;,
#   bldg_type_Twnhs &lt;dbl&gt;, bldg_type_TwnhsE &lt;dbl&gt;,
#   house_style_X1.5Unf &lt;dbl&gt;, house_style_X1Story &lt;dbl&gt;,
#   house_style_X2.5Fin &lt;dbl&gt;, house_style_X2.5Unf &lt;dbl&gt;,
#   house_style_X2Story &lt;dbl&gt;, house_style_SFoyer &lt;dbl&gt;, ...

$mold$outcomes
# A tibble: 1,460 x 1
   sale_price
        &lt;dbl&gt;
 1       12.2
 2       12.1
 3       12.3
 4       11.8
 5       12.4
 6       11.9
 7       12.6
 8       12.2
 9       11.8
10       11.7
# ... with 1,450 more rows

$mold$blueprint
Formula blueprint: 
 
# Predictors: 245 
  # Outcomes: 1 
   Intercept: TRUE 
Novel Levels: FALSE 
 Composition: tibble 
  Indicators: traditional 

$mold$extras
$mold$extras$offset
NULL



attr(,&quot;class&quot;)
[1] &quot;stage_pre&quot; &quot;stage&quot;    

$fit
$actions
$actions$model
$spec
Linear Regression Model Specification (regression)

Main Arguments:
  penalty = 0.00954548456661833
  mixture = 1

Computational engine: glmnet 


$formula
NULL

attr(,&quot;class&quot;)
[1] &quot;action_model&quot; &quot;action_fit&quot;   &quot;action&quot;      


$fit
parsnip model object

Fit time:  141ms 

Call:  glmnet::glmnet(x = maybe_matrix(x), y = y, family = &quot;gaussian&quot;,      alpha = ~1) 

     Df  %Dev  Lambda
1     0  0.00 0.32630
2     1 11.34 0.29730
3     1 20.75 0.27090
4     1 28.57 0.24680
5     1 35.05 0.22490
6     2 40.93 0.20490
7     2 46.54 0.18670
8     3 51.78 0.17010
9     3 56.20 0.15500
10    3 59.86 0.14130
11    3 62.90 0.12870
12    4 65.68 0.11730
13    5 68.11 0.10690
14    5 70.33 0.09736
15    8 72.27 0.08871
16    8 73.96 0.08083
17    8 75.37 0.07365
18   10 76.72 0.06711
19   11 77.96 0.06115
20   13 79.05 0.05571
21   14 80.06 0.05076
22   14 80.91 0.04625
23   14 81.61 0.04215
24   15 82.20 0.03840
25   17 82.75 0.03499
26   19 83.25 0.03188
27   20 83.73 0.02905
28   22 84.27 0.02647
29   23 84.74 0.02412
30   27 85.24 0.02197
31   30 85.77 0.02002
32   34 86.31 0.01824
33   37 86.82 0.01662
34   39 87.28 0.01515
35   43 87.69 0.01380
36   45 88.06 0.01257
37   49 88.40 0.01146
38   51 88.73 0.01044
39   55 89.07 0.00951
40   59 89.37 0.00867
41   63 89.63 0.00790
42   67 89.88 0.00720
43   70 90.10 0.00656
44   76 90.29 0.00597
45   80 90.46 0.00544
46   84 90.61 0.00496
47   88 90.75 0.00452
48   93 90.88 0.00412
49  100 91.02 0.00375
50  105 91.14 0.00342
51  109 91.26 0.00312
52  122 91.37 0.00284
53  128 91.49 0.00259
54  137 91.62 0.00236
55  143 91.90 0.00215
56  149 92.19 0.00196
57  151 92.44 0.00178
58  156 92.64 0.00162
59  164 92.83 0.00148
60  171 93.03 0.00135
61  177 93.21 0.00123
62  180 93.36 0.00112
63  184 93.49 0.00102
64  185 93.60 0.00093
65  190 93.70 0.00085
66  193 93.78 0.00077
67  201 93.85 0.00070
68  204 93.91 0.00064
69  207 93.97 0.00058
70  208 94.01 0.00053
71  213 94.06 0.00048
72  213 94.10 0.00044
73  212 94.13 0.00040
74  212 94.15 0.00037
75  214 94.18 0.00033
76  216 94.19 0.00030
77  217 94.21 0.00028
78  221 94.23 0.00025
79  221 94.24 0.00023
80  223 94.25 0.00021
81  227 94.26 0.00019
82  228 94.27 0.00017
83  229 94.28 0.00016
84  233 94.29 0.00014
85  233 94.30 0.00013
86  233 94.30 0.00012
87  234 94.31 0.00011
88  233 94.31 0.00010
89  237 94.32 0.00009
90  236 94.32 0.00008
91  238 94.33 0.00008
92  238 94.33 0.00007
93  238 94.33 0.00006
94  238 94.33 0.00006
95  238 94.34 0.00005
96  239 94.34 0.00005
97  239 94.34 0.00004
98  240 94.34 0.00004
99  239 94.34 0.00004
100 239 94.34 0.00003

attr(,&quot;class&quot;)
[1] &quot;stage_fit&quot; &quot;stage&quot;    

$post
$actions
list()

attr(,&quot;class&quot;)
[1] &quot;stage_post&quot; &quot;stage&quot;     

$trained
[1] TRUE</code></pre>
</div>
<h2 id="example-from-hw">2. Example from HW</h2>
<h3 id="plot-the-coefficients-vs.-the-specified-penalty-values">2) Plot the coefficients vs. the specified penalty values</h3>
<p>This is example from HW pdf</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  <span class='va'>Boston</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>Boston</span><span class='op'>)</span>
<span class='va'>x</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='va'>crim</span><span class='op'>~</span><span class='va'>.</span>,<span class='va'>Boston</span><span class='op'>)</span><span class='op'>[</span>,<span class='op'>-</span><span class='fl'>1</span><span class='op'>]</span>
<span class='va'>y</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>Boston</span><span class='op'>$</span><span class='va'>crim</span><span class='op'>)</span>
<span class='va'>lasso.mod</span> <span class='op'>=</span><span class='fu'><a href='https://glmnet.stanford.edu/reference/glmnet.html'>glmnet</a></span><span class='op'>(</span><span class='va'>x</span>,<span class='va'>y</span>, alpha <span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>
<span class='va'>beta</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/coef.html'>coef</a></span><span class='op'>(</span><span class='va'>lasso.mod</span><span class='op'>)</span>

<span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>tmp</span><span class='op'>$</span><span class='va'>coef</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/row.names.html'>row.names</a></span><span class='op'>(</span><span class='va'>tmp</span><span class='op'>)</span>
<span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'>reshape</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/reshape/man/melt-24.html'>melt</a></span><span class='op'>(</span><span class='va'>tmp</span>, id <span class='op'>=</span> <span class='st'>"coef"</span><span class='op'>)</span>
<span class='va'>tmp</span><span class='op'>$</span><span class='va'>variable</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"s"</span>, <span class='st'>""</span>, <span class='va'>tmp</span><span class='op'>$</span><span class='va'>variable</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>tmp</span><span class='op'>$</span><span class='va'>lambda</span> <span class='op'>&lt;-</span> <span class='va'>lasso.mod</span><span class='op'>$</span><span class='va'>lambda</span><span class='op'>[</span><span class='va'>tmp</span><span class='op'>$</span><span class='va'>variable</span><span class='op'>+</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># extract the lambda values</span>
<span class='va'>tmp</span><span class='op'>$</span><span class='va'>norm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>beta</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span>,<span class='op'>]</span><span class='op'>)</span>, <span class='fl'>2</span>, <span class='va'>sum</span><span class='op'>)</span><span class='op'>[</span><span class='va'>tmp</span><span class='op'>$</span><span class='va'>variable</span><span class='op'>+</span><span class='fl'>1</span><span class='op'>]</span> <span class='co'># compute L1 norm</span>


<span class='co'># x11(width = 13/2.54, height = 9/2.54)</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>tmp</span><span class='op'>[</span><span class='va'>tmp</span><span class='op'>$</span><span class='va'>coef</span> <span class='op'>!=</span> <span class='st'>"(Intercept)"</span>,<span class='op'>]</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>lambda</span>, <span class='va'>value</span>, color <span class='op'>=</span> <span class='va'>coef</span>, linetype <span class='op'>=</span> <span class='va'>coef</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
    <span class='fu'>geom_line</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
    <span class='fu'>scale_x_log10</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
    <span class='fu'>xlab</span><span class='op'>(</span><span class='st'>"Lambda (log scale)"</span><span class='op'>)</span> <span class='op'>+</span> 
    <span class='fu'>guides</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'>guide_legend</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span>, 
           linetype <span class='op'>=</span> <span class='fu'>guide_legend</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
    <span class='fu'>theme</span><span class='op'>(</span>legend.key.width <span class='op'>=</span> <span class='fu'>unit</span><span class='op'>(</span><span class='fl'>3</span>,<span class='st'>"lines"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="2021-04-09-week7report_files/figure-html5/unnamed-chunk-14-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<h4 id="lasso">Lasso</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='va'>sale_price</span> <span class='op'>~</span> <span class='va'>.</span> , <span class='va'>train2</span><span class='op'>)</span><span class='op'>[</span>,<span class='op'>-</span><span class='fl'>37</span><span class='op'>]</span>
  <span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>train</span><span class='op'>$</span><span class='va'>sale_price</span>
  
  <span class='va'>train_sam</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>2</span><span class='op'>)</span>
  <span class='va'>test_sam</span> <span class='op'>&lt;-</span><span class='op'>(</span><span class='op'>-</span><span class='va'>train_sam</span><span class='op'>)</span>
  <span class='va'>ytest</span> <span class='op'>&lt;-</span> <span class='va'>y</span><span class='op'>[</span><span class='va'>test_sam</span><span class='op'>]</span>

  <span class='va'>cv.lasso</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://glmnet.stanford.edu/reference/cv.glmnet.html'>cv.glmnet</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='va'>train_sam</span>,<span class='op'>]</span>, <span class='va'>y</span><span class='op'>[</span><span class='va'>train_sam</span><span class='op'>]</span>, alpha <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
  
  <span class='va'>lasso.coef</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>cv.lasso</span>, type <span class='op'>=</span> <span class='st'>"coefficients"</span>, s<span class='op'>=</span><span class='va'>cv.lasso</span><span class='op'>$</span><span class='va'>lambda.min</span> <span class='op'>)</span>
  
  <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>cv.lasso</span><span class='op'>$</span><span class='va'>glmnet.fit</span>, xvar <span class='op'>=</span> <span class='st'>"lambda"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="2021-04-09-week7report_files/figure-html5/unnamed-chunk-15-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<h4 id="ridge">Ridge</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='va'>sale_price</span> <span class='op'>~</span> <span class='va'>.</span> , <span class='va'>train2</span><span class='op'>)</span><span class='op'>[</span>,<span class='op'>-</span><span class='fl'>37</span><span class='op'>]</span>
  <span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>train</span><span class='op'>$</span><span class='va'>sale_price</span>
  
  <span class='va'>train_sam</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>2</span><span class='op'>)</span>
  <span class='va'>test_sam</span> <span class='op'>&lt;-</span><span class='op'>(</span><span class='op'>-</span><span class='va'>train_sam</span><span class='op'>)</span>
  <span class='va'>ytest</span> <span class='op'>&lt;-</span> <span class='va'>y</span><span class='op'>[</span><span class='va'>test_sam</span><span class='op'>]</span>

  <span class='va'>cv.ridge</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://glmnet.stanford.edu/reference/cv.glmnet.html'>cv.glmnet</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='va'>train_sam</span>,<span class='op'>]</span>, <span class='va'>y</span><span class='op'>[</span><span class='va'>train_sam</span><span class='op'>]</span>, alpha <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>
  
  <span class='va'>lasso.coef</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>cv.ridge</span> , type <span class='op'>=</span> <span class='st'>"coefficients"</span>, s<span class='op'>=</span><span class='va'>cv.lasso</span><span class='op'>$</span><span class='va'>lambda.min</span> <span class='op'>)</span>
  
  <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>cv.ridge</span><span class='op'>$</span><span class='va'>glmnet.fit</span>, xvar <span class='op'>=</span> <span class='st'>"lambda"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="2021-04-09-week7report_files/figure-html5/unnamed-chunk-16-1.png" width="624" style="display: block; margin: auto;" /></p>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
